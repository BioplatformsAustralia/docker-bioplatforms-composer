#!/bin/sh
. "${CCG_COMPOSER_HOME}"/lib/logging
. "${CCG_COMPOSER_HOME}"/lib/git-tag

## ./develop.sh sanity                           (Print some info for sanity checking)

info 'sanity'
info "whoami                    ($(whoami))"
info "id                        ($(id))"
info "docker-compose            ($(docker-compose --version))"
info "CCG_PROJECT               (${CCG_PROJECT})"
info "DOCKER_BUILD_OPTS         (${DOCKER_BUILD_OPTS})"
info "DOCKER_RUN_OPTS           (${DOCKER_RUN_OPTS})"
info "git                       ($(git --version))"
info "pwd                       ($(pwd))"
info "DOCKER_ROUTE              (${DOCKER_ROUTE})"
# shellcheck disable=2154
info "http_proxy                (${http_proxy})"
info "PIP_INDEX_URL             (${PIP_INDEX_URL})"
info "git status -s"
git status -s
if [ -f .env ]; then
    info "Found an .env file"
else
    warn "No .env file"
fi

if curl --output /dev/null --silent --head "${http_proxy}"; then
    info "Connected to http proxy"
else
    warn "Failed to connect to http proxy"
fi

if curl --output /dev/null --silent --head "${PIP_INDEX_URL}"; then
    info "Connected to pip index"
else
    warn "Failed to connect to pip index"
fi
git_tag
